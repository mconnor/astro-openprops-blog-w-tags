---
import Link from '@components/Link.astro';
import AstroThemeSwitcher from '@components/AstroSwitcher/index.astro';
import { Box, Cluster } from '@cc/index.js';
---

<header class="surface4">
  <!-- <AstroThemeSwitcher /> -->
  <Box invert borderWidth="0" padding="var(--s0)">
    <Box borderWidth="0" padding="var(--s00)">
      <AstroThemeSwitcher />
    </Box>
    <Box borderWidth="0" padding="0">
      <Cluster align="baseline" justify="space-between" space="0">
        <Link isMainNav href="/">Mike Connor</Link>

        <Box borderWidth="0" padding="0">
          <nav>
            <Cluster align="baseline" justify="flex-end" space="var(--s0)">
              <Link href="/about/">About</Link>
              <Link href="/icons/">Icons</Link>
              <Link href="/kitchensink/">Kitchen Sink</Link>
              <Link href="/blog/">Blog</Link>
              <Link href="/tags/">Tags</Link>
            </Cluster>
          </nav>
        </Box>
      </Cluster>
    </Box>
  </Box>
</header>

<script is:inline>
  // import { $currTheme } from '../store/currTheme.ts';

  // on page, get the last theme from the cookie and set it
  document.addEventListener('astro:page-load', () => {
    const storedTheme = localStorage.getItem('theme');
    if (storedTheme) {
      document.documentElement.setAttribute('data-theme', storedTheme);
      // $currTheme.set(storedTheme);
    } else {
      document.documentElement.setAttribute('data-theme', 'light');
    }
    // console.log('theme set to', storedTheme);
  });
</script>

<style>
  header {
    background-color: var(--surface-4);
    color: var(--text-1);
  }
</style>
